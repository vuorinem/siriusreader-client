<template>
  <require from="library/nr-title-cover"></require>
  <require from="utility/number-value-converter"></require>
  <require from="./minutes-and-seconds-value-converter"></require>

  <div class="row d-flex justify-content-center">
    <div class="col-md-12">
      <div class="logos">
        <img src="/uni-aberdeen-logo.png" alt="University of Aberdeen" class="university-logo" />
        <img src="/siriusreader-logo-vertical.png" alt="Sirius Reader" />
        <img src="/uni-edinburgh-logo.png" alt="The University of Edinburgh" class="university-logo" />
      </div>

      <h1 class="text-center">
        Reading Behaviour
        <span class="subtitle text-muted">Infographic</span>
      </h1>

      <main class="infographic">
        <section id="book">
          <div class="loading" if.bind="!title">
            <span class="loading-spinner" title="Loading content..."></span>
          </div>

          <img class="rounded img-fluid" nr-title-cover="${title.bookId}" alt="${title.title}">
          <h2>You read</h2>
          <p class="details">
            <span class="title">${title.title}</span><br />
            <span class="author">by ${title.author}</span>
          </p>
        </section>

        <section id="readermotivation">
          <div class="loading" if.bind="!readerMotivation">
            <span class="loading-spinner" title="Loading content..."></span>
          </div>

          <canvas class="chart" ref="readerMotivationChart"></canvas>

          <h2>Are you an avid reader?</h2>

          <p class="infotext" if.bind="readerMotivation.motivationType === 'intrinsic'">
            Your answers indicate that you
            are intrinsically motivated to read. Intrinsically motivated readers are avid readers who read simply
            because reading is an
            enjoyable activity. This motivation type has been associated with a high reading ability!
          </p>

          <p class="infotext" if.bind="readerMotivation.motivationType === 'competent'">
            Your answers indicate that you
            are a highly competent reader. Reading competence is crucial for academic achievement, financial
            independence,
            and overall life success.
          </p>

          <p class="infotext" if.bind="readerMotivation.motivationType === 'effortful'">
            Your answers indicate that you
            put a lot of effort in reading. Carefully reading a text can enhance your memory for the text contents,
            however, it can difficult to keep up a leisurely reading habit if you put too much pressure on yourself.
          </p>

          <p class="infotext" if.bind="readerMotivation.motivationType === 'nonfrequent'">
            Your answers indicate that you
            may be a nonfrequent reader. Your score in 'Effort' shows that you don't pressurise yourself into reading,
            which is important for reading voluntarily whenever you feel like
            it!
          </p>
        </section>

        <section id="readingspeed" class="highlight">
          <div class="loading" if.bind="!readingSummary">
            <span class="loading-spinner" title="Loading content..."></span>
          </div>

          <h2>
            <i class="icon highlight bi bi-stopwatch"></i>
            Your reading speed
          </h2>
          <ul>
            <li>Your reading speed in the test was
              <b>${readingSummary.baselineReadingSpeedWordsPerMinute | number:0} words per minute (wpm)</b>.
              This means that your deep reading speed (at which you read to fully understand content) varies between
              <b>100-${readingSummary.maximumReadingSpeedWordsPerMinute | number:0} wpm</b>.
            </li>
            <li>During the study, your average deep reading speed was
              <b>${readingSummary.averageReadingSpeedWordsPerMinute | number:0} wpm</b>.
              Therefore, you read on average
              <b>${readingSpeedToBaselineComparison} your baseline reading speed</b>.
            </li>
            <li>Previous research has indicated that adults usually read at speed 250wpm, which means that you tend to
              read
              <b>${readingSpeedToOverallAverageComparison} overall average</b>.
            </li>
          </ul>
        </section>

        <section id="readingsessions" class="highlight">
          <div class="loading" if.bind="!readingSummary">
            <span class="loading-spinner" title="Loading content..."></span>
          </div>

          <h2>
            <span class="intro">Your reading was divided in</span>
            <span class="reading-session-count highlight">${readingSummary.readingSessionCount}</span>
            <span class="outro">reading sessions.</span>
          </h2>
          <ul>
            <li>Your longest reading session lasted for
              <b>${readingSummary.longestReadingSessionInMinutes | minutesAndSeconds}</b>.
            </li>
            <li>Your average reading session was
              <b>${readingSummary.averageReadingSessionInMinutes | minutesAndSeconds}</b>.
            </li>
          </ul>
          <p>
            Your reading session length can show how you fit reading for fun in your everyday life!
          </p>
        </section>

        <section id="sessionchart">
          <div class="loading" if.bind="!readingSummary">
            <span class="loading-spinner" title="Loading content..."></span>
          </div>
          <h2>This is what your longest reading session looked like:</h2>
          <div class="chart-with-legend">
            <div class="chart">
              <canvas ref="readingSessionChart"></canvas>
            </div>

            <div class="chart-legend">
              <ul>
                <li repeat.for="type of engagementTypes">
                  <span class="legend-colour" css="background-color: ${type.colour};"></span>
                  <span class="legend-title">${type.title}</span>
                </li>
              </ul>
            </div>
          </div>

          <p>
            When we read a book to understand its contents, we usually read at a 'deep reading' speed. Slower reading
            speeds than deep reading may occur if you became distracted during reading or a part of the text is
            particularly difficult! 'Skim reading' and 'scan reading' refer to a higher reading speed, and 'browsing'
            means that you turn the pages so fast that you spend less than a second on each page. You may also see some
            black on your reading session timeline - it shows when you stopped reading during the reading session.
          </p>
        </section>

        <section id="chronologychart" class="highlight">
          <div class="loading" if.bind="!chronologySummary">
            <span class="loading-spinner" title="Loading content..."></span>
          </div>

          <h2>Did you read the book chronologically from beginning to end?</h2>

          <p>
            Compare your reading process to the dashed line that represents what chronological reading at a steady speed
            would have
            looked like.
          </p>

          <canvas class="chart" ref="chronologyChart"></canvas>
        </section>

        <section id="locationchart" class="highlight">
          <h2>Your reading locations</h2>

          <p>
            Your most popular reading location was <b>${mostPopularReadingLocation}</b>.
            All your top reading locations are shown below.
          </p>

          <canvas class="chart" ref="locationSummaryChart"></canvas>
        </section>
      </main>
    </div>
  </div>
</template>